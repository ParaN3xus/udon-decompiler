# Udon Decompiler

The Udon Decompiler.

## Usage

1. Extract `MonoBehaviour`s from VRChat worlds with [AssetRipper](https://github.com/AssetRipper/AssetRipper)
2. Create a new VRChat World Project, and import all extracted `MonoBehaviour`s
3. Use the two editor scripts in the `Editor` folder in the newly created world project:
   - `UdonProgramDumper` to dump potential `UdonProgram`s in `MonoBehaviour`s into JSON
   - `UdonModuleInfoExtractor` to extract all `UdonModuleWrapper` info
4. `python -m udon_decompiler <input> --info <UdonModuleInfo.json>`
5. Enjoy!

## TODO

- [ ] Remove `todo:` marks from code
- [ ] Editor Tools
  - [ ] `UdonModuleInfoExtractor` for different VRChat World SDK version
  - [ ] `UdonProgramDumper` supporting different `serializedProgramCompressedBytes` formats
- [ ] Unit tests and E2E tests
- [ ] Better `VariableIdentifier`
  - [ ] Identify variable scope and type by their names(`__lcl`, `__intnl`, `__const`)
- [ ] Better `ExpressionBuilder`
  - [x] Complete `ExpressionType` `BINARY_OP`, `UNARY_OP`, `PROPERTY_ACCESS`, `ARRAY_ACCESS`, `CAST`, by identifying special `CALL` names, i.e.:
    - `BINARY_OP` like `__op_Addition__SystemInt32_SystemInt32__SystemInt32`
    - `UNARY_OP` like `SystemBoolean.__op_UnaryNegation__SystemBoolean__SystemBoolean`
    - `PROPERTY_ACCESS` like `UnityEngineComponent.__get_gameObject__UnityEngineGameObject`
    - `ARRAY_ACCESS` like `SystemObjectArray.__Get__SystemInt32__SystemObject`
    - `CAST` like `SystemConvert.__ToSingle__SystemObject__SystemSingle`
  - [x] Support method calling analysis for `CALL`
- [ ] Better `CSharpCodeGenerator`
  - [ ] Type alias like `bool` for `System.Boolean`
  - [x] Friendly function name like `VRCUdonCommonInterfacesIUdonEventReceiver.SendCustomEvent` for `VRCUdonCommonInterfacesIUdonEventReceiver.__SendCustomEvent__SystemString__SystemVoid` (this is just a stopgap measure for missing method calling analysis in `ExpressionType`)
  - [ ] Comments

## Contributing

I know nothing about decompiling. Almost all the code was generated by Claude 4.5 Sonnet. Professional help is welcome and eagerly needed.

You are free to contribute to this project, including bug fixes, code refactor, or new features, i.e., completing the todos above.

## License

AGPL-3.0-only.
